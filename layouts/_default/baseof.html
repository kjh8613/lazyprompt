<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode }}">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- SEO Meta Tags -->
    <title>{{ if .IsHome }}{{ .Site.Title }} - {{ .Site.Params.profileMode.subtitle }}{{ else }}{{ .Title }} | {{
        .Site.Title }}{{ end }}</title>
    <meta name="description"
        content="{{ if .IsHome }}{{ .Site.Params.profileMode.subtitle }}{{ else }}{{ .Summary | truncate 160 }}{{ end }}">
    <meta name="keywords" content="AI prompts, ChatGPT, prompt library, AI tools, prompt engineering">

    <!-- Open Graph / Social Media -->
    <meta property="og:type" content="{{ if .IsHome }}website{{ else }}article{{ end }}">
    <meta property="og:title" content="{{ .Title }}">
    <meta property="og:description"
        content="{{ if .IsHome }}{{ .Site.Params.profileMode.subtitle }}{{ else }}{{ .Summary | truncate 160 }}{{ end }}">
    <meta property="og:url" content="{{ .Permalink }}">
    {{ with .Params.cover.image }}
    <meta property="og:image" content="{{ . | absURL }}">
    {{ end }}

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/images/logo_dark.png">

    <!-- Stylesheet -->
    <link rel="stylesheet" href="/css/style.css?v={{ now.Unix }}">

    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6793290562583440"
        crossorigin="anonymous"></script>
</head>

<body>
    <!-- Mobile Sidebar Toggle -->
    <button class="sidebar-toggle" id="sidebarToggle" aria-label="Toggle Menu">‚ò∞</button>

    <div class="app-layout">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <a href="/" class="sidebar-logo">{{ .Site.Title }}</a>
            <p class="sidebar-subtitle">{{ .Site.Params.profileMode.subtitle }}</p>

            <!-- Home Section -->
            <div class="sidebar-section">
                <h3 class="sidebar-section-title">Navigation</h3>
                <ul class="sidebar-nav">
                    <li>
                        <a href="/">
                            <span>üè† Home</span>
                            <span class="sidebar-count">{{ len .Site.RegularPages }}</span>
                        </a>
                    </li>
                </ul>
            </div>

            <!-- Categories Section -->
            <div class="sidebar-section">
                <h3 class="sidebar-section-title">Categories</h3>
                <ul class="sidebar-nav">
                    {{ range $name, $taxonomy := .Site.Taxonomies.categories }}
                    <li>
                        <a href="/categories/{{ $name | urlize }}/">
                            <span>{{ $name | humanize }}</span>
                            <span class="sidebar-count">{{ $taxonomy.Count }}</span>
                        </a>
                    </li>
                    {{ end }}
                </ul>
            </div>

            <!-- Swipe Handle for Mobile -->
            <div class="sidebar-swipe-handle"></div>
        </aside>

        <!-- Main Content Wrapper -->
        <div class="main-with-sidebar">
            <!-- Header -->
            <header class="site-header">
                <div class="header-container">
                    <a href="/" class="site-logo">{{ .Site.Title }}</a>
                    <nav class="header-nav">
                        <a href="/" class="nav-link">Home</a>
                        {{ range .Site.Menus.main }}
                        <a href="{{ .URL }}" class="nav-link">{{ .Name }}</a>
                        {{ end }}
                    </nav>
                </div>
            </header>

            <!-- Main Content -->
            {{ block "main" . }}{{ end }}

            <!-- Footer -->
            <footer class="site-footer">
                <div class="footer-content">
                    <p>&copy; {{ now.Year }} {{ .Site.Title }}. Designed for Builders & Creators.</p>
                </div>
            </footer>
        </div>
    </div>

    <!-- Sidebar Toggle Script -->
    <script>
        (function () {
            const sidebarToggle = document.getElementById('sidebarToggle');
            const sidebar = document.getElementById('sidebar');
            let touchStartX = 0;
            let touchEndX = 0;

            if (sidebarToggle && sidebar) {
                // Click toggle
                sidebarToggle.addEventListener('click', function () {
                    sidebar.classList.toggle('open');
                });

                // Touch/Swipe events for sidebar
                sidebar.addEventListener('touchstart', function (e) {
                    touchStartX = e.changedTouches[0].screenX;
                }, { passive: true });

                sidebar.addEventListener('touchend', function (e) {
                    touchEndX = e.changedTouches[0].screenX;
                    handleSwipe();
                }, { passive: true });

                // Screen edge swipe to open (from left edge)
                document.addEventListener('touchstart', function (e) {
                    if (e.touches[0].clientX < 30 && window.innerWidth <= 968) {
                        touchStartX = e.touches[0].clientX;
                    }
                }, { passive: true });

                document.addEventListener('touchend', function (e) {
                    if (touchStartX < 30 && window.innerWidth <= 968) {
                        touchEndX = e.changedTouches[0].clientX;
                        if (touchEndX - touchStartX > 50) {
                            sidebar.classList.add('open');
                        }
                        touchStartX = 0;
                    }
                }, { passive: true });

                function handleSwipe() {
                    const swipeDistance = touchEndX - touchStartX;

                    if (swipeDistance < -50 && sidebar.classList.contains('open')) {
                        // Swipe left to close
                        sidebar.classList.remove('open');
                    } else if (swipeDistance > 50 && !sidebar.classList.contains('open')) {
                        // Swipe right to open
                        sidebar.classList.add('open');
                    }
                }

                // Close sidebar when clicking outside on mobile
                document.addEventListener('click', function (e) {
                    if (window.innerWidth <= 968 &&
                        !sidebar.contains(e.target) &&
                        !sidebarToggle.contains(e.target) &&
                        sidebar.classList.contains('open')) {
                        sidebar.classList.remove('open');
                    }
                });
            }
        })();
    </script>

    <!-- Copy Button Script (for code blocks) -->
    <script src="/js/copy.js"></script>
</body>

</html>