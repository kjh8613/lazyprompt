<script>
    { { - $.Scratch.Set "searchIndex" slice -} }
    { { - range.Site.RegularPages -} }
    { { - $item := dict "title".Title "summary"(.Summary | plainify) "permalink".RelPermalink "date"(.Date.Format "Jan 02, 2006") "image".Params.cover.image -} }
    { { - $.Scratch.Add "searchIndex"(slice $item) -} }
    { { - end -} }
    window.searchIndex = {{ $.Scratch.Get "searchIndex" | jsonify | safeJS }};
    console.log("Embedded Index Loaded (Partial + Scratch):", window.searchIndex ? window.searchIndex.length : 0, "items");
</script>
<script src="/js/search.js?v=embedded_v2"></script>