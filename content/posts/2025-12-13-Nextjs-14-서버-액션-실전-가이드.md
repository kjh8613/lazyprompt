---
title: "Next.js 14 서버 액션 실전 가이드"
date: 2025-12-13 22:03:22
draft: false
summary: "## 🎯 프롬프트 설명  이 프롬프트는 Next.js 14의 서버 액션 기능을 프론트엔드 개발자 대상으로 완벽하게 해설하는 가이드를 생성하기 위..."
categories: ["코딩"]
cover:
    image: "https://picsum.photos/seed/Nextjs-14-서버-액션-실전-가이드38/800/400"
    alt: "Next.js 14 서버 액션 실전 가이드"
    relative: false
---
## 🎯 프롬프트 설명

이 프롬프트는 Next.js 14의 서버 액션 기능을 프론트엔드 개발자 대상으로 완벽하게 해설하는 가이드를 생성하기 위한 것입니다. 기존 API 라우트와의 차이점, 폼 데이터 처리, 안전한 코드 스니펫, 에러 핸들링 방법을 상세히 설명하는 것을 목표로 합니다.

## 📋 프롬프트 내용 (복사해서 사용하세요)

```markdown
## Next.js 14 서버 액션 실전 가이드 (프론트엔드 개발자 대상)

**개요:**

Next.js 14에서 도입된 서버 액션은 클라이언트 컴포넌트에서 서버 기능을 직접 호출할 수 있게 해주는 강력한 기능입니다. 이 가이드에서는 서버 액션을 사용하여 폼 데이터를 처리하고, 기존 API 라우트와 비교하며, 안전하고 효율적인 코드를 작성하는 방법을 단계별로 설명합니다.

**1. 서버 액션이란 무엇인가? (기존 API 라우트와의 비교)**

*   **정의:** 서버 액션은 클라이언트 컴포넌트에서 직접 호출할 수 있는 서버 사이드 함수입니다. `use server` 지시어를 사용하여 서버 액션으로 지정합니다.
*   **API 라우트와의 차이점:**
    *   **편의성:** 서버 액션은 별도의 API 엔드포인트를 만들 필요 없이 컴포넌트 내에서 직접 서버 로직을 실행할 수 있어 개발 속도를 향상시킵니다.
    *   **보안:** 서버 액션은 서버 환경에서 실행되므로 클라이언트 측에서 직접 데이터베이스에 접근하거나 민감한 작업을 수행할 필요가 없어 보안성을 높입니다.
    *   **폼 데이터 처리:** 폼 데이터 처리를 위한 별도의 API 라우트 설정 없이, 서버 액션을 사용하여 직접 처리할 수 있습니다.
    *   **Typescript 지원:** 서버 액션은 Typescript를 완벽하게 지원하여 개발 생산성과 안정성을 높입니다.

**2. 서버 액션 사용법 (단계별 가이드)**

**(1) 서버 액션 정의:**

*   `use server` 지시어를 사용하여 서버 액션을 정의합니다.
*   서버 액션은 서버 컴포넌트 또는 `server.ts`와 같은 별도의 파일에 정의할 수 있습니다.

**(2) 클라이언트 컴포넌트에서 서버 액션 호출:**

*   `useFormState` 훅 또는 `form` 태그의 `action` 속성을 사용하여 서버 액션을 호출합니다.
*   서버 액션의 결과를 클라이언트 컴포넌트에서 업데이트할 수 있습니다.

**(3) 폼 데이터 처리:**

*   `FormData` 객체를 사용하여 폼 데이터를 서버 액션으로 전송합니다.
*   서버 액션 내에서 폼 데이터를 검증하고 처리합니다.

**3. 안전한 코드 스니펫 (폼 데이터 처리 예시)**

```typescript
// app/actions.ts (서버 액션)
'use server';

import { revalidatePath } from 'next/cache';
import { cookies } from 'next/headers';
import { redirect } from 'next/navigation';

export async function createItem(prevState: any, formData: FormData) {
  const name = formData.get('name') as string;
  const description = formData.get('description') as string;

  if (!name || name.length < 3) {
    return {
      message: '이름은 3자 이상이어야 합니다.',
    };
  }

  try {
    // 데이터베이스 저장 로직 (가정)
    // await db.item.create({ data: { name, description } });
    console.log("아이템 생성:", {name, description})

    revalidatePath('/'); // 캐시 무효화 (선택 사항)
    // redirect('/'); // 페이지 리디렉션 (선택 사항)
    return { message: '아이템이 성공적으로 생성되었습니다.' };

  } catch (e: any) {
    console.error(e);
    return { message: '아이템 생성에 실패했습니다.' };
  }
}
```

```typescript
// app/page.tsx (클라이언트 컴포넌트)
'use client';

import { useFormState } from 'react-dom';
import { createItem } from './actions';

export default function Page() {
  const [state, formAction] = useFormState(createItem, {message: null});

  return (
    <form action={formAction}>
      <label htmlFor="name">이름:</label>
      <input type="text" id="name" name="name" required />

      <label htmlFor="description">설명:</label>
      <textarea id="description" name="description" />

      <button type="submit">아이템 생성</button>
      {state?.message && <p>{state.message}</p>}
    </form>
  );
}
```

**4. 에러 핸들링 및 검증**

*   **서버 액션 내 에러 처리:** `try...catch` 블록을 사용하여 서버 액션 내에서 발생하는 에러를 처리합니다.
*   **클라이언트 컴포넌트로 에러 전달:** 에러 메시지를 클라이언트 컴포넌트로 반환하여 사용자에게 알립니다.
*   **유효성 검사:** 서버 액션 내에서 폼 데이터의 유효성을 검사하고, 유효하지 않은 경우 에러 메시지를 반환합니다.
*   **보안:** 입력값 검증을 통해 악의적인 공격(예: XSS, SQL Injection)을 방지합니다.

**5. 추가 팁 및 주의 사항**

*   **`revalidatePath`를 사용한 캐시 무효화:** 데이터 변경 후 캐시를 무효화하여 최신 데이터를 보여줍니다.
*   **`redirect`를 사용한 페이지 리디렉션:** 작업 완료 후 다른 페이지로 리디렉션합니다.
*   **서버 액션은 서버 환경에서만 실행됩니다.** 클라이언트 컴포넌트에서 직접 디버깅할 수 없습니다. 서버 로그를 활용하여 디버깅합니다.
*   **보안에 유의하여 코드를 작성합니다.** 특히 사용자 입력값을 처리할 때 XSS, SQL Injection 등의 공격에 취약하지 않도록 주의해야 합니다.
*   **Next.js 공식 문서 및 예제를 참고합니다.** Next.js 공식 문서에서 더 자세한 정보를 얻을 수 있습니다.

**결론:**

Next.js 14의 서버 액션은 프론트엔드 개발자가 서버 기능을 더욱 효율적으로 활용할 수 있도록 돕는 강력한 도구입니다. 이 가이드를 통해 서버 액션을 완벽하게 이해하고 실제 프로젝트에 적용하여 개발 생산성을 향상시키세요.
```

## 💡 사용 팁

1.  **구체적인 예제 요청:** 위 프롬프트는 포괄적인 가이드를 요청하므로, 특정 시나리오 (예: 파일 업로드, 데이터베이스 연동 등)에 대한 예제를 추가해달라고 요청하면 더욱 실용적인 답변을 얻을 수 있습니다.
2.  **기술 수준 명시:** 프롬프트에서 대상 독자의 기술 수준 (예: 초급, 중급)을 명시하면 더욱 적절한 난이도의 답변을 얻을 수 있습니다.
3.  **원하는 답변 형식 지정:** 코드 스니펫의 형식, 설명의 길이, 강조해야 할 부분 등을 명확하게 지정하면 원하는 스타일의 답변을 얻을 수 있습니다. 예를 들어, "각 단계별로 코드 스니펫과 함께 상세한 설명을 제공해주세요." 와 같이 요청할 수 있습니다.
